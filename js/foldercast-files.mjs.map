{"version":3,"file":"foldercast-files.mjs","sources":["../src/files.js"],"sourcesContent":["import { generateUrl } from '@nextcloud/router'\nimport axios from '@nextcloud/axios'\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    if (OCA.Files && OCA.Files.fileActions) {\n        OCA.Files.fileActions.registerAction({\n            name: 'foldercast',\n            displayName: 'Turn into Podcast',\n            mime: 'dir',\n            permissions: OC.PERMISSION_READ,\n            iconClass: 'icon-radio', // Standard Nextcloud icon? check\n            actionHandler: (fileName, context) => {\n                const fileId = context.fileInfoModel.attributes.id\n                axios.post(generateUrl('/apps/foldercast/api/feeds'), {\n                    folderId: fileId\n                }).then((response) => {\n                    console.log('Feed created', response.data)\n                    OC.dialogs.alert(\n                        'Podcast feed created! Token: ' + response.data.token,\n                        'FolderCast'\n                    )\n                }).catch((error) => {\n                    console.error(error)\n                    OC.dialogs.alert(\n                        'Error creating feed: ' + (error.response?.data?.error || error.message),\n                        'FolderCast'\n                    )\n                })\n            }\n        })\n    }\n})\n"],"names":["fileName","context","fileId","axios","generateUrl","response","error"],"mappings":"sDAGA,SAAS,iBAAiB,mBAAoB,IAAM,CAC5C,IAAI,OAAS,IAAI,MAAM,aACvB,IAAI,MAAM,YAAY,eAAe,CACjC,KAAM,aACN,YAAa,oBACb,KAAM,MACN,YAAa,GAAG,gBAChB,UAAW,aACX,cAAe,CAACA,EAAUC,IAAY,CAClC,MAAMC,EAASD,EAAQ,cAAc,WAAW,GAChDE,EAAM,KAAKC,EAAY,4BAA4B,EAAG,CAClD,SAAUF,CAC9B,CAAiB,EAAE,KAAMG,GAAa,CAClB,QAAQ,IAAI,eAAgBA,EAAS,IAAI,EACzC,GAAG,QAAQ,MACP,gCAAkCA,EAAS,KAAK,MAChD,YACxB,CACgB,CAAC,EAAE,MAAOC,GAAU,CAChB,QAAQ,MAAMA,CAAK,EACnB,GAAG,QAAQ,MACP,yBAA2BA,EAAM,UAAU,MAAM,OAASA,EAAM,SAChE,YACxB,CACgB,CAAC,CACL,CACZ,CAAS,CAET,CAAC"}